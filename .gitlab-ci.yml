stages:
  - test
  - deploy

default:
  image: ruby:latest
  cache:
    paths:
      - vendor/
  before_script:
    # upgrade bundler to latest version
    - gem install bundler
    # install required gems
    - bundle install --path vendor

test:
  stage: test
  script:
    - script/ci_test.sh
  only:
    - master
    - merge_requests
